

<div class="p-4 bg-gray-100 dark:bg-gray-900 min-h-full">
  <h1 class="text-xl font-bold mb-4 dark:text-gray-100">Choose Payment Method</h1>
  
  <div class="bg-white dark:bg-gray-800 rounded-lg shadow">
    <label class="flex items-center p-4 border-b dark:border-gray-700 cursor-pointer" [class.cursor-not-allowed]="!canPayWithWallet()" [class.opacity-50]="!canPayWithWallet()">
      <input type="radio" name="payment" value="Wallet" [checked]="selectedPaymentMethod() === 'Wallet'" (change)="selectPaymentMethod('Wallet')" [disabled]="!canPayWithWallet()" class="h-4 w-4 text-pink-600 focus:ring-pink-500">
      <div class="ml-3">
        <span class="font-semibold dark:text-gray-100">Wallet</span>
        <span class="text-xs text-green-600 dark:text-green-400 ml-2">(Balance: ₹{{ stateService.currentUser()?.walletBalance }})</span>
        @if(!canPayWithWallet()) {
          <p class="text-xs text-red-500 dark:text-red-400">Insufficient balance for this order</p>
        }
      </div>
    </label>
    <label class="flex items-center p-4 border-b dark:border-gray-700 cursor-pointer" [class.cursor-not-allowed]="!isCodAvailableInCart()" [class.opacity-50]="!isCodAvailableInCart()">
      <input type="radio" name="payment" value="COD" [checked]="selectedPaymentMethod() === 'COD'" (change)="selectPaymentMethod('COD')" [disabled]="!isCodAvailableInCart()" class="h-4 w-4 text-pink-600 focus:ring-pink-500">
      <div class="ml-3">
        <span class="font-semibold dark:text-gray-100">Cash On Delivery</span>
        @if(!isCodAvailableInCart()) {
          <p class="text-xs text-red-500 dark:text-red-400">Not available for all items in your cart</p>
        }
      </div>
    </label>
    <label class="flex items-center p-4 border-b dark:border-gray-700 cursor-pointer">
      <input type="radio" name="payment" value="UPI" [checked]="selectedPaymentMethod() === 'UPI'" (change)="selectPaymentMethod('UPI')" class="h-4 w-4 text-pink-600 focus:ring-pink-500">
      <span class="ml-3 font-semibold dark:text-gray-100">UPI & QR Code</span>
    </label>
  </div>

  <div class="sticky bottom-0 bg-white dark:bg-gray-800 p-4 -mx-4 mt-4 border-t dark:border-gray-700 flex justify-between items-center">
    <div>
        <div class="text-xl font-bold dark:text-white">₹{{ cartTotal() }}</div>
        <a href="#" class="text-sm font-semibold text-pink-500 dark:text-pink-400">View Details</a>
    </div>
    <button (click)="placeOrder()" class="w-1/2 bg-pink-500 text-white font-bold py-3 rounded-md">
       @if (selectedPaymentMethod() === 'UPI') {
        <span>PROCEED TO PAY</span>
      } @else {
        <span>PAY NOW</span>
      }
    </button>
  </div>
</div>