
<div class="p-4 bg-gray-100 min-h-full">
  <h1 class="text-xl font-bold mb-4">Choose Payment Method</h1>
  
  <div class="bg-white rounded-lg shadow">
    <label class="flex items-center p-4 border-b cursor-pointer" [class.cursor-not-allowed]="!canPayWithWallet()" [class.opacity-50]="!canPayWithWallet()">
      <input type="radio" name="payment" value="Wallet" [checked]="selectedPaymentMethod() === 'Wallet'" (change)="selectPaymentMethod('Wallet')" [disabled]="!canPayWithWallet()" class="h-4 w-4 text-pink-600">
      <div class="ml-3">
        <span class="font-semibold">Wallet</span>
        <span class="text-xs text-green-600 ml-2">(Balance: ₹{{ stateService.currentUser()?.walletBalance }})</span>
        @if(!canPayWithWallet()) {
          <p class="text-xs text-red-500">Insufficient balance for this order</p>
        }
      </div>
    </label>
    <label class="flex items-center p-4 border-b cursor-pointer" [class.cursor-not-allowed]="!isCodAvailableInCart()" [class.opacity-50]="!isCodAvailableInCart()">
      <input type="radio" name="payment" value="COD" [checked]="selectedPaymentMethod() === 'COD'" (change)="selectPaymentMethod('COD')" [disabled]="!isCodAvailableInCart()" class="h-4 w-4 text-pink-600">
      <div class="ml-3">
        <span class="font-semibold">Cash On Delivery</span>
        @if(!isCodAvailableInCart()) {
          <p class="text-xs text-red-500">Not available for all items in your cart</p>
        }
      </div>
    </label>
    <label class="flex items-center p-4 border-b cursor-pointer">
      <input type="radio" name="payment" value="UPI" [checked]="selectedPaymentMethod() === 'UPI'" (change)="selectPaymentMethod('UPI')" class="h-4 w-4 text-pink-600">
      <span class="ml-3 font-semibold">UPI & QR Code</span>
    </label>
  </div>

  <div class="sticky bottom-0 bg-white p-4 -mx-4 mt-4 border-t flex justify-between items-center">
    <div>
        <div class="text-xl font-bold">₹{{ cartTotal() }}</div>
        <a href="#" class="text-sm font-semibold text-pink-500">View Details</a>
    </div>
    <button (click)="placeOrder()" class="w-1/2 bg-pink-500 text-white font-bold py-3 rounded-md">
       @if (selectedPaymentMethod() === 'UPI') {
        <span>PROCEED TO PAY</span>
      } @else {
        <span>PAY NOW</span>
      }
    </button>
  </div>
</div>
