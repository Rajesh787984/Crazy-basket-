<div>
  <h1 class="text-3xl font-bold mb-6 text-gray-100">{{ isEditMode ? 'Edit Product' : 'Add New Product' }}</h1>
  
  <form [formGroup]="productForm" (ngSubmit)="saveProduct()" class="bg-white p-6 rounded-lg shadow space-y-6">
    <!-- Basic Info -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <input formControlName="name" type="text" placeholder="Product Name" class="w-full px-4 py-2 border rounded-md">
      <input formControlName="brand" type="text" placeholder="Brand" class="w-full px-4 py-2 border rounded-md">
    </div>

    <!-- Pricing & Rating -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <input formControlName="price" type="number" placeholder="Selling Price (B2C)" class="w-full px-4 py-2 border rounded-md">
      <input formControlName="originalPrice" type="number" placeholder="Original Price (MRP)" class="w-full px-4 py-2 border rounded-md">
      <input formControlName="b2bPrice" type="number" placeholder="B2B Price (Optional)" class="w-full px-4 py-2 border rounded-md">
    </div>
     <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <input formControlName="rating" type="number" step="0.1" placeholder="Rating (e.g., 4.5)" class="w-full px-4 py-2 border rounded-md">
        <input formControlName="reviews" type="number" placeholder="Reviews Count (e.g., 1200)" class="w-full px-4 py-2 border rounded-md">
        <select formControlName="category" class="w-full px-4 py-2 border rounded-md bg-white">
          @for (category of categories(); track category.id) {
            <option [value]="category.name">{{ category.name }}</option>
          }
        </select>
    </div>

    <!-- Images -->
    <div formArrayName="images">
      <h3 class="font-semibold mb-2">Images (URLs)</h3>
      @for(image of images.controls; track $index) {
        <div class="flex items-center mb-2">
          <input [formControlName]="$index" type="text" placeholder="https://..." class="w-full px-4 py-2 border rounded-md">
          <button type="button" (click)="removeImage($index)" class="ml-2 text-red-500">Remove</button>
        </div>
      }
      <button type="button" (click)="addImage()" class="text-sm text-pink-600 font-semibold">+ Add Image</button>
    </div>

     <!-- Sizes -->
    <div formArrayName="sizes">
      <h3 class="font-semibold mb-2">Sizes & Stock</h3>
      @for(sizeGroup of sizes.controls; track $index) {
        <div [formGroupName]="$index" class="flex items-center space-x-4 mb-2 p-2 bg-gray-50 rounded">
          <input formControlName="name" type="text" placeholder="e.g., M, L, 10" class="w-1/3 px-4 py-2 border rounded-md">
          <label class="flex items-center">
            <input formControlName="inStock" type="checkbox" class="h-4 w-4 rounded border-gray-300 text-pink-600">
            <span class="ml-2">In Stock</span>
          </label>
          <button type="button" (click)="removeSize($index)" class="ml-auto text-red-500">Remove</button>
        </div>
      }
      <button type="button" (click)="addSize()" class="text-sm text-pink-600 font-semibold">+ Add Size</button>
    </div>

    <!-- Details -->
    <div formArrayName="details">
      <h3 class="font-semibold mb-2">Product Details</h3>
       @for(detail of details.controls; track $index) {
        <div class="flex items-center mb-2">
          <input [formControlName]="$index" type="text" placeholder="e.g., 100% Cotton" class="w-full px-4 py-2 border rounded-md">
          <button type="button" (click)="removeDetail($index)" class="ml-2 text-red-500">Remove</button>
        </div>
      }
      <button type="button" (click)="addDetail()" class="text-sm text-pink-600 font-semibold">+ Add Detail</button>
    </div>

     <!-- Additional settings -->
    <div>
        <h3 class="font-semibold mb-2">Additional Settings</h3>
        <div class="space-y-4">
             <input formControlName="videoUrl" type="text" placeholder="YouTube Embed URL (optional)" class="w-full px-4 py-2 border rounded-md">
             <input formControlName="sizeChartUrl" type="text" placeholder="Size Chart Image URL (optional)" class="w-full px-4 py-2 border rounded-md">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <label class="flex items-center">
                  <input formControlName="isCodAvailable" type="checkbox" class="h-4 w-4 rounded border-gray-300 text-pink-600">
                  <span class="ml-2">Cash on Delivery</span>
              </label>
               <label class="flex items-center">
                  <input formControlName="allowPhotoUpload" type="checkbox" class="h-4 w-4 rounded border-gray-300 text-pink-600">
                  <span class="ml-2">Allow Photo Upload</span>
              </label>
               <label class="flex items-center">
                  <input formControlName="preorderAvailable" type="checkbox" class="h-4 w-4 rounded border-gray-300 text-pink-600">
                  <span class="ml-2">Pre-order Available</span>
              </label>
            </div>
        </div>
    </div>

    <!-- Specifications -->
    <div>
      <h3 class="font-semibold mb-2">Specifications</h3>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <input formControlName="color" type="text" placeholder="Color" class="w-full px-4 py-2 border rounded-md">
        <input formControlName="pattern" type="text" placeholder="Pattern" class="w-full px-4 py-2 border rounded-md">
        <select formControlName="idealFor" class="w-full px-4 py-2 border rounded-md bg-white">
          <option value="Men">Ideal for Men</option>
          <option value="Women">Ideal for Women</option>
          <option value="Kids">Ideal for Kids</option>
          <option value="Unisex">Unisex</option>
        </select>
        <input formControlName="sleeve" type="text" placeholder="Sleeve Style" class="w-full px-4 py-2 border rounded-md">
        <input formControlName="closure" type="text" placeholder="Closure Type" class="w-full px-4 py-2 border rounded-md">
        <input formControlName="fabricCare" type="text" placeholder="Fabric Care" class="w-full px-4 py-2 border rounded-md">
      </div>
    </div>
    
    <!-- Actions -->
    <div class="flex justify-end space-x-4 pt-6 border-t">
      <button type="button" (click)="cancel()" class="bg-gray-200 text-gray-800 font-bold py-2 px-6 rounded-lg hover:bg-gray-300">
        Cancel
      </button>
      <button type="submit" [disabled]="productForm.invalid" class="bg-pink-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-pink-700 disabled:bg-gray-300">
        Save Product
      </button>
    </div>
  </form>
</div>